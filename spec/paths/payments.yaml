post:
  security:
    - ApiSecretKey: []
  tags:
    - Payments
  summary: Request a payment or payout
  operationId: requestAPaymentOrPayout
  description: |
    To accept payments from <a href="https://docs.checkout.com/payment-methods/cards" target="blank">cards</a>, <a href="https://docs.checkout.com/payment-methods/wallets" target="blank">digital wallets</a> and many <a href="https://docs.checkout.com/payment-methods/" target="blank">alternative payment methods</a>, specify the `source.type` field, along with the source-specific data.

    To <a href="https://docs.checkout.com/payment-actions/pay-out-to-a-card" target="blank">pay out to a card</a>, specify the destination of your payout using the `destination.type` field, along with the destination-specific data.

    To verify the success of the payment, check the `approved` field in the response.
  parameters:
    - $ref: '../components/parameters/ckoIdempotencyKey.yaml'
  requestBody:
    content:
      application/json:
        schema:
          oneOf:
            - $ref: '../components/schemas/Payments/PaymentRequest.yaml'
            - $ref: '../components/schemas/Payments/Payout.yaml'
  responses:
    '201':
      description: Payment processed successfully
      content:
        application/json:
          schema:
            $ref: '../components/schemas/Payments/PaymentResponse.yaml'
          example:
            id: "pay_mbabizu24mvu3mela5njyhpit4"
            action_id: "act_mbabizu24mvu3mela5njyhpit4"
            amount: 6540
            currency: "USD"
            approved: true
            status: "Authorized"
            auth_code: "770687"
            response_code: "10000"
            response_summary: "Approved"
            3ds:
              downgraded: true
              enrolled: "N"
            risk:
              flagged: true
            source:
              type: "card"
              id: "src_nwd3m4in3hkuddfpjsaevunhdy"
              billing_address:
                address_line1: "Checkout.com"
                address_line2: "90 Tottenham Court Road"
                city: "London"
                state: "London"
                zip: "W1T 4TJ"
                country: "GB"
              phone:
                country_code: "+1"
                number: "415 555 2671"
              last4: "4242"
              fingerprint: "F31828E2BDABAE63EB694903825CDD36041CC6ED461440B81415895855502832"
              bin: "424242"
            customer:
              id: "cus_udst2tfldj6upmye2reztkmm4i"
              email: "jokershere@gmail.com"
              name: "Jack Napier"
            processed_on: '2019-09-10T10:11:12Z'
            reference: "ORD-5023-4E89"
            processing:
              retrieval_reference_number: "909913440644"
              acquirer_transaction_id: "440644309099499894406"
            eci: "06"
            scheme_id: "489341065491658"
            _links:
              self:
                href: "https://api.sandbox.checkout.com/payments/pay_mbabizu24mvu3mela5njyhpit4"
              actions:
                href: "https://api.sandbox.checkout.com/payments/pay_mbabizu24mvu3mela5njyhpit4/actions"
              void:
                href: "https://api.sandbox.checkout.com/payments/pay_mbabizu24mvu3mela5njyhpit4/voids"
              capture:
                href: "https://api.sandbox.checkout.com/payments/pay_mbabizu24mvu3mela5njyhpit4/captures"
      headers:
        Cko-Request-Id:
          $ref: "../components/headers/Cko-Request-Id.yaml"
        Cko-Version:
          $ref: "../components/headers/Cko-Version.yaml"
    '202':
      description: Payment asynchronous or further action required
      content:
        application/json:
          schema:
            $ref: '../components/schemas/Payments//PaymentAcceptedResponse.yaml'
      headers:
        Cko-Request-Id:
          $ref: "../components/headers/Cko-Request-Id.yaml"
        Cko-Version:
          $ref: "../components/headers/Cko-Version.yaml"
    '401':
      description: Unauthorized
    '429':
      description: Too many requests or duplicate request detected
      content:
        application/json:
          schema:
            $ref: '../components/schemas/ValidationError.yaml'
    '422':
      description: Invalid data was sent
      content:
        application/json:
          schema:
            $ref: '../components/schemas/ValidationError.yaml'
    '502':
      description: Bad gateway
